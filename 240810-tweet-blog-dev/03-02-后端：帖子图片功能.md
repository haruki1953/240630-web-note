![接口编写步骤](笔记/碎碎念.md#接口编写步骤)

### 帖子发送
- 鉴权
- 表单校验
- post表添加
	- 附有parentPostId：关联帖子TODO
	- 附有有图片ID：关联图片TODO


### 图片发送
- 鉴权
- 图片处理
- image表添加

```
图片处理逻辑
- jpg，两种大小（large、small），原图original
- 存放在 /data/public/image/(original、large、small)/(随机00-99)/(uuid).jpg
  原图的后缀名用其原本的。随机00-99做目录是为了防止目录下文件过多影响性能
- large版，长或宽最多不能超过1920，small不超过680
  如果本身就不超过1920，则large版使用本身尺寸
  如果本身就不超过680，同理，并且无large版（largeSize为0）
- 如果图片处理后大小(size)仍大于原图，且原图也是jpg，则使用原图保存

```

```
pnpm add jimp@0.22.12

pnpm add uuid@9.0.1
pnpm add --save-dev @types/uuid@9.0.1
```

```js
const { v4: uuidv4 } = require('uuid');
// 生成 UUID
const postId = uuidv4();
console.log(postId); // 打印生成的 UUID
```